<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=no" />
    <meta name="description" content="Semantic-UI-Forest, collection of design, themes and templates for Semantic-UI." />
    <meta name="keywords" content="Semantic-UI, Theme, Design, Template" />
    <meta name="author" content="PPType" />
    <meta name="theme-color" content="#ffffff" />

    <title>IRO-UNMO web application</title>

    <!--- Site CSS -->
    <link rel="stylesheet" type="text/css" href="~/dist/components/reset.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/site.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/grid.css">
    <!--- Component CSS -->
    <link rel="stylesheet" type="text/css" href="~/dist/components/icon.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/table.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/transition.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/popup.css">
    <link rel="stylesheet" type="text/css" href="~/dist/components/accordion.css">

    <script src="~/assets/library/jquery.min.js"></script>
    <script src="~/assets/library/iframe-content.js"></script>

    <script type="text/javascript" src="~/dist/components/popup.js"></script>
    <script type="text/javascript" src="~/dist/components/transition.js"></script>
    <script type="text/javascript" src="~/dist/components/accordion.js"></script>
    <!--- Component JS -->

    <link rel="stylesheet" type="text/css" href="~/css/semantic.min.css">

    <style type="text/css">
        body {
            -webkit-font-smoothing: antialiased;
            -moz-font-smoothing: grayscale;
        }

        #sidebar {
            position: fixed;
            height: 100vh;
            background-color: #f5f5f5;
            padding-top: 68px;
            padding-left: 0;
            padding-right: 0;
        }

            #sidebar .ui.menu > a.item {
                padding: 10px 20px;
                line-height: 20px;
                color: #337ab7;
                border-radius: 0 !important;
                margin-top: 0;
                margin-bottom: 0;
            }

                #sidebar .ui.menu > a.item.active {
                    background-color: #337ab7;
                    color: white;
                    border: none !important;
                }

                #sidebar .ui.menu > a.item:hover {
                    background-color: #eee;
                    color: #23527c;
                }

        #content {
            padding-top: 56px;
            padding-left: 20px;
            padding-right: 20px;
        }

            #content h1 {
                font-size: 36px;
            }

            #content .ui.dividing.header {
                width: 100%;
            }

        .ui.centered.small.circular.image {
            margin-top: 14px;
            margin-bottom: 14px;
        }

        .ui.borderless.menu {
            box-shadow: none;
            flex-wrap: wrap;
            border: none;
            padding-left: 0;
            padding-right: 0;
        }

        .ui.mobile.only.grid .ui.menu .ui.vertical.menu {
            display: none;
        }

        .noti-content {
            right: 100px;
            background: #ffffff;
            border-radius: 4px;
            top: 47px;
            width: 250px;
            display: none;
            border: 1px solid #9E988B;
        }

        ul#notiContent {
            max-height: 200px;
            overflow: auto;
            padding: 0px;
            margin: 0px;
            padding-left: 20px;
        }

            ul#notiContent li {
                margin: 3px;
                padding: 6px;
                background: #fff;
            }

        .noti-top-arrow {
            border-color: transparent;
            border-bottom-color: #F5DEB3;
            border-style: dashed dashed solid;
            border-width: 0 8.5px 8.5px;
            right: 32px;
            top: -8px;
        }

        i.noti {
            color: white;
            margin: 15px;
            right: 100px;
            font-size: 18px;
            cursor: pointer;
        }

        i.count {
            position: relative;
            top: -3px;
        }


    </style>
</head>

<body id="root">
    <div class="ui tablet computer only padded grid">
        <div class="ui inverted borderless top fixed fluid menu">
            <a class="header item">IRO-UNMO Admin</a>
            <div class="right menu">
                <div class="item">
                    <div class="ui small input"><input placeholder="Search..." /></div>
                </div>
                <div class="item">
                    <i class="noti bell outline icon"><i class="count">&nbsp;</i></i>
                    <div class="noti-content">
                        <div class="noti-top-arrow"></div>
                        <ul id="notiContent"></ul>
                    </div>
                </div>
                <a asp-area="" asp-controller="account" asp-action="type" class="item">Create new acc TEST</a>
                <a asp-action="login" asp-controller="account" class="item">Login</a>
                <a class="item">Dashboard</a> <a class="item">Settings</a>
                <a class="item">Profile</a> <a class="item">Help</a>
            </div>
        </div>
    </div>
    <div class="ui mobile only padded grid">
        <div class="ui top fixed borderless fluid inverted menu">
            <a class="header item">IRO-UNMO Admin</a>
            <div class="right menu">
                <div class="item">
                    <button class="ui icon toggle basic inverted button">
                        <i class="content icon"></i>
                    </button>
                </div>
            </div>
            <div class="ui vertical borderless inverted fluid menu">
                <a class="item">Dashboard</a> <a class="item">Settings</a>
                <a class="item">Profile</a> <a class="item">Help</a>
                <div class="ui fitted divider"></div>
                <div class="item">
                    <div class="ui small input"><input placeholder="Search..." /></div>
                </div>
            </div>
        </div>
    </div>
    <div class="ui padded grid">
        <div class="three wide tablet only three wide computer only column"
             id="sidebar">
            <div class="ui vertical borderless fluid text menu">
                <a class="active item">Overview</a>
                <div class="ui hidden divider"></div>
                <a asp-action="index" asp-controller="partners" asp-area="admin" class="active item">Partners</a>
                <div class="ui hidden divider"></div>
                <a class="active item">Overview</a>
                <a class="item" asp-controller="applicants" asp-action="index">Applicants</a>
                <a class="item">Applications</a>
            </div>
        </div>
        <div class="sixteen wide mobile thirteen wide tablet thirteen wide computer right floated column"
             id="content">
            <div class="ui padded grid">
                <div class="row">
                    <h1 class="ui huge dividing header">Dashboard</h1>
                </div>
                <div class="ui container">
                    @RenderBody()
                </div>
                <div class="ui hidden section divider"></div>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js" type="text/javascript"></script>

    <script src="~/dist/semantic.min.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {
            $(".ui.toggle.button").click(function () {
                $(".mobile.only.grid .ui.vertical.menu").toggle(100);
            });
        });
    </script>

    @* Add Jquery Library *@
    <script src="~/Scripts/jquery-2.2.3.min.js"></script>
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="/signalr/hubs"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    @* Add css  *@

    @* Add jquery code for Get Notification & setup signalr *@
    <script type="text/javascript">
        $(function () {
            // Click on notification icon for show notification
            $('i.noti').click(function (e) {
                e.stopPropagation();
                $('.noti-content').show();
                var count = 0;
                count = parseInt($('i.count').html()) || 0;
                //only load notification if not already loaded
                if (count > 0) {
                    updateNotification();
                }
                $('i.count', this).html('&nbsp;');
            })
            // hide notifications
            $('html').click(function () {
                $('.noti-content').hide();
            })
            // update notification
            function updateNotification() {
                $('#notiContent').empty();
                $('#notiContent').append($('<li>Loading...</li>'));
                $.ajax({
                    type: 'GET',
                    url: '/home/GetNotificationContacts',
                    success: function (response) {
                        $('#notiContent').empty();
                        if (response.length == 0) {
                            $('#notiContent').append($('<li>No data available</li>'));
                        }
                        $.each(response, function (index, value) {
                            $('#notiContent').append($('<li>New contact : ' + value.ContactName + ' (' + value.ContactNo + ') added</li>'));
                        });
                    },
                    error: function (error) {
                        console.log(error);
                    }
                })
            }
            // update notification count
            function updateNotificationCount() {
                var count = 0;
                count = parseInt($('i.count').html()) || 0;
                count++;
                $('i.count').html(count);
            }
            // signalr js code for start hub and send receive notification
            var notificationHub = $.connection.notificationHub;
            $.connection.hub.start().done(function () {
                console.log('Notification hub started');
            });
            //signalr method for push server message to client
            notificationHub.client.notify = function (message) {
                if (message && message.toLowerCase() == "added") {
                    updateNotificationCount();
                }
            }
        })
    </script>

</body>
</html>